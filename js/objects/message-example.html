<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>System Object Example</title>
				<script src="../ohm/simpletalk.ohm" type="text/ohm-js"></script>
				<script src="build/devSystem.bundle.js"></script>
    </head>
    <body>
        <style>
         body {
             display: block;
             width: 100vw;
             height: 100vh;
             padding: 0;
             margin: 0;
         }
        </style>
        <div id="template-area">
        </div>
        <script>
         document.addEventListener('DOMContentLoaded', () => {
             // Create an initial structure.
             // Adding a WorldStack will add an initial
             // empty stack with an initial empty first card,
             // along with views for all.
             System.newModel('world', System);

             // Find the current card and add a button
             // to it
             let cardModel = document.querySelector('st-card').model;
             cardModel.sendMessage({
                 type: 'newModel',
                 name: 'button',
                 owner: cardModel
             }, cardModel);
         });
        </script>
    </body>
</html>

<!--
<script>
  // add a card and button to the current world
  stack = document.querySelector('st-stack');
  var card = document.querySelector('st-card');

  // add a button to the card
  var newButtonMsg = { type: 'newModel', modelType: 'button', owner: card.model };
  card.sendMessage(newButtonMsg, System);
  var button = document.querySelector('st-button');
  // add another card
  var newCardMsg = { type: 'newModel', modelType: 'card', owner: stack.model };
  stack.sendMessage(newCardMsg, System);

  // make sure the current card is what it is
  console.log('current card: ' + document.querySelector('.current-card').id);

  // Send a go to next card message
  // var nextCardMsg = { type: 'command', commandName: 'go to', args: ['next', 'card'] };
  // button.sendMessage(nextCardMsg, button.model);
  // check that the current card is iterated fwd
  console.log('current card: ' + document.querySelector('.current-card').id)

  // add a script to the button1`
  button.model.partProperties.setPropertyNamed(button.model, 'script',
      'on mouseUp\n    go to next card\n end mouseUp')
  console.log(button.model.partProperties.getPropertyNamed(button.model, 'script'))

	// now send the button a mouseUp message
	var mouseUpMsg = { type: 'command', commandName: 'mouseUp', args: [] };
  button.sendMessage(mouseUpMsg, button.model);
</script>
-->
